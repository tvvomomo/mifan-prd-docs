# 投注

![投注单元选中效果](/images/betting-selected.png)

投注功能分为以下的流程：

* 正常的投注
* 异常的投注

正常投注是指用户已登录，且余额充足的情况下，且未触发后端异常下的投注流程。

![单个投注单显示效果](/images/betting-single.png)

异常投注是指触发了某种异常导致无法投注成功。异常包括以下类型，但也不限于此，所有异常以[第三方接口](/thirdpart.html)、研发、产品共同整理：

* 用户未登录 - 跳转至登录页面 -> 回到投注页面再次下注，且保留用户已选信息。
* 用户余额不足 - 显示余额不足弹窗提醒 -> 用户点击确认后跳转至充值页面 -> 用户完成充值后，回到投注页面再次下注，且保留用户已选信息。
* 部分投注失效 - 显示部分投注失效提醒（如飘红），直接在页面等待用户手动删除投注。

![部分投注失效](/images/betting-failed.png)

投注的交互包括：

* 点击【竞猜单】icon，下方滑出竞猜单控件。控件上面的横杠抓手，可以拖动改变其高度。往下滑动至边缘，可以关闭竞猜单。或点击竞猜单控件上方区域，关闭竞猜单。
* 若竞猜单的高度无法承载竞猜内容，则在竞猜单控件的标题和抓手以下区域滑动，可以查看竞猜单里的内容。而保持不动的有：
  * 标题
  * 竞猜单数量
  * 赔率变化确认
  * 确认竞猜按钮
* 点击确认竞猜按钮后，若后端接口返回成功，则数量 icon 变成成功符号，确认竞猜变成成功符号后，停留 60s 后关闭竞猜单。回到打开竞猜单的原页面。

![竞猜单 Scroll](/images/betting-scroll.png)

![确认竞猜后，竞猜单清 0](/images/betting-none.png)

## 串式投注

### 串式投注买法

投注的买法请参考[第三方接口](/thirdpart.html)。产品整理了串式投注的规则，请参考：[串式投注](/paylay.html)

![串式投注 - 收起](/images/betting-multi-hidden.png)

如上图，若用户选择了三个不同赛事的投注单元，则竞猜单由两部分构成：

* 单式投注 - 即选择的投注单元的右侧，直接输入投注金额即可。
* 串式投注 - 在选择的投注单元的下方，会列出所有的串式投注的方式，输入金额则代表需要进行串式投注。

*注：图中的串式投注仅显示一种是因为目前是收起模式。但一般来说，三个不相关的投注单元，会有 2 串 1、3 串 1、3 串 4，3 种串式投注方式。*

![串式投注 - 展开](/images/betting-multi-all.png)

### 串式投注异常

串式投注的异常较为复杂，首先我们需要先了解一下什么情况下可以进行串式投注：

* 不是所有的赛事都可以投注连串过关。如果您在投注列表中看到不可以组合二个不相关的赛事（可以查看以下的信息关于有关联的连串），那么就是其中一场并没有开出连串过关投注。
* 连串过关可以投注不同种类的赛事，以及不在同一天的比赛。

如下情况，若注单中包含了：

* 伯恩利 vs 切尔西的全场让球盘
* 北京国安 vs 广州恒大的全场让球盘
* 北京国安 vs 广州恒大的全场大小盘

其中涉及两个注单是同一场比赛，则无法进行串式投注；而伯恩利可分别和北京国安的两种注单进行串式投注。则 2 串 1 为 2 单。

![注单中包含了两个注单为同一场比赛的情况](/images/betting-multi-mix.png)

除此之外，若所有注单都是同一场比赛，则无法进行串式投注，则为所有单都是单式注单。

![所有注单均为同一场比赛](/images/betting-multi-same.png)

单式投注和串式投注可以一起下单，只需在上方和下方分别输入即可。

![单式投注、串式投注的输入](/images/betting-multi-input.png)

### 横屏投注

在某些场景下，如直播观看下，我们需要在横屏的情况下进行下注。此时的显示效果如下：

|名称|设计图|
|---|---|
|竞猜列表|![](/images/betting-list-h.png)|
|竞猜列表 - 点选|![](/images/betting-selected-h.png)|
|竞猜单|![](/images/betting-h.png)|
|竞猜单 - 输入|![](/images/betting-input-h.png)
